<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>歌詞タイムスタンプエディタ</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>歌詞タイムスタンプエディタ</h1>
            <p class="subtitle">波形上をクリックして歌詞を追加し、SRT/JSON形式で出力 by <a href="https://github.com/sponsors/tatmos">tatmos</a></p>
            <div class="app-version">v1.0.0</div>
        </header>

        <div class="controls-panel">
            <div class="file-controls">
                <label for="file-input" class="btn btn-primary">
                    <input type="file" id="file-input" accept=".wav,.mp3,audio/*" hidden>
                    波形をアップロード
                </label>
            </div>

            <div class="mode-controls">
                <button id="add-mode-btn" class="btn btn-mode btn-mode-active" data-mode="add">追加モード</button>
                <button id="adjust-mode-btn" class="btn btn-mode" data-mode="adjust">調整モード</button>
            </div>

            <div class="playback-controls">
                <button id="play-btn" class="btn btn-play" disabled>▶ 再生</button>
                <button id="stop-btn" class="btn btn-stop" disabled>■ 停止</button>
            </div>

            <div class="export-controls">
                <label for="import-srt-input" class="btn btn-secondary">
                    <input type="file" id="import-srt-input" accept=".srt" hidden>
                    SRT読み込み
                </label>
                <label for="import-json-input" class="btn btn-secondary">
                    <input type="file" id="import-json-input" accept=".json" hidden>
                    JSON読み込み
                </label>
                <div class="filename-controls">
                    <label for="output-filename-input">出力ファイル名:</label>
                    <input type="text" id="output-filename-input" class="filename-input" placeholder="lyrics" value="lyrics">
                </div>
                <button id="export-srt-btn" class="btn btn-secondary" disabled>SRT出力</button>
                <button id="export-json-btn" class="btn btn-secondary" disabled>JSON出力</button>
            </div>
        </div>

        <div class="waveform-container">
            <div class="original-waveform-container">
                <div class="track-header">
                    <div class="track-label">波形</div>
                    <div class="track-controls">
                        <div class="zoom-controls">
                            <button id="zoom-in-btn" class="btn btn-small" disabled>🔍+</button>
                            <button id="zoom-out-btn" class="btn btn-small" disabled>🔍-</button>
                            <button id="zoom-reset-btn" class="btn btn-small" disabled>全体表示</button>
                        </div>
                        <div class="playback-time" id="playback-time"></div>
                        <div class="range-duration" id="range-duration">長さ: 0.00秒</div>
                    </div>
                </div>
                <div class="waveform-row">
                    <div class="audio-controls">
                        <div class="level-meter" id="original-level-meter">
                            <div class="level-bar" id="original-level-bar"></div>
                        </div>
                        <button class="speaker-btn" id="original-speaker-btn" disabled>
                            <span class="speaker-icon">🔇</span>
                        </button>
                    </div>
                    <div class="waveform-wrapper drop-zone" id="original-drop-zone">
                        <div class="drop-overlay" id="drop-overlay">波形をアップロード</div>
                        <canvas id="original-waveform" class="waveform-canvas"></canvas>
                    </div>
                </div>
                <div id="ruler-original" class="time-ruler"></div>
            </div>
        </div>

        <div class="lyric-preview-section">
            <div id="lyric-preview" class="lyric-preview">
                <p class="preview-placeholder">再生すると歌詞がここに表示されます</p>
            </div>
        </div>

        <div class="lyrics-section">
            <h2>歌詞一覧</h2>
            <div class="lyrics-table-container">
                <table id="lyrics-table" class="lyrics-table">
                    <thead>
                        <tr>
                            <th>開始時刻</th>
                            <th>内容</th>
                            <th>終了時刻</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="lyrics-tbody">
                        <tr class="empty-row">
                            <td colspan="4" class="empty-message">歌詞がまだありません。波形上をクリックして追加してください。</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div id="status" class="status"></div>

    </div>

    <!-- 歌詞入力モーダル -->
    <div id="lyric-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>歌詞を追加</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="lyric-time">時刻 (秒):</label>
                    <input type="number" id="lyric-time" class="form-input" step="0.01" min="0" readonly>
                </div>
                <div class="form-group">
                    <label for="lyric-text">歌詞:</label>
                    <textarea id="lyric-text" class="form-textarea" rows="3" placeholder="歌詞を入力してください"></textarea>
                </div>
            </div>
            <div class="modal-footer">
                <button id="lyric-cancel-btn" class="btn btn-secondary">キャンセル</button>
                <button id="lyric-save-btn" class="btn btn-primary">保存</button>
            </div>
        </div>
    </div>

    <script src="waveformDrawer.js"></script>
    <script src="timeRuler.js"></script>
    <script src="originalWaveformViewer.js"></script>
    <script src="audioPlayer.js"></script>
    <script src="levelMeter.js"></script>
    <script src="lyricManager.js"></script>
    <script src="exporter.js"></script>
    <script src="importer.js"></script>
    <script src="fileHandler.js"></script>
    <script src="app.js"></script>
    <script src="uiController.js"></script>
</body>
</html>

